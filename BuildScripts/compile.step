<?xml version="1.0" encoding="utf-8" ?>
<project name="the compile step" default="go">
	
	<target name="go" depends="build_code, build_samples, build_services" description="begining the compilation" />
	
	<target name="build_code" description="Building Main Library">
		<delete  dir="${dirs.build}" failonerror="false" />
		
		<msbuild project="${dirs.root}\MassTransit-2008.sln" verbosity="quiet">
			<property name="Configuration" value="${msbuild.configuration}" />
		</msbuild>
	</target>
	
	
	<target name="build_services" description="Building Deploys">
		<msbuild project="${dirs.root}\PreBuiltServices\Deployment-2008.sln" verbosity="quiet">
			<property name="Configuration" value="${msbuild.configuration}" />
		</msbuild>
	</target>
	
	<target name="build_samples" description="Building Samples">
		<msbuild project="${dirs.root}\Samples\HeavyLoad\HeavyLoad-2008.sln" verbosity="quiet">
			<property name="Configuration" value="${msbuild.configuration}" />
		</msbuild>
		<msbuild project="${dirs.root}\Samples\OpenAllNight\OpenAllNight-2008.sln" verbosity="quiet">
			<property name="Configuration" value="${msbuild.configuration}" />
		</msbuild>
		<msbuild project="${dirs.root}\Samples\Starbucks\Starbucks.sln" verbosity="quiet">
			<property name="Configuration" value="${msbuild.configuration}" />
		</msbuild>
		<msbuild project="${dirs.root}\Samples\PublishSubscribe\PublishSubscribe-2008.sln" verbosity="quiet">
			<property name="Configuration" value="${msbuild.configuration}" />
		</msbuild>
		<msbuild project="${dirs.root}\Samples\WebRequestReply\WebRequestReply-2008.sln" verbosity="quiet">
			<property name="Configuration" value="${msbuild.configuration}" />
		</msbuild>
	</target>
	
	
	<!-- sensible defaults -->
	<property name="dirs.root" value=".." overwrite="false" />
	<property name="dirs.build" value="${dirs.root}\bin" overwrite="false" />
	<property name="msbuild.configuration" value="Release" overwrite="false" />
	<property name="nant.settings.currentframework" value="net-3.5" overwrite="false" />
</project>